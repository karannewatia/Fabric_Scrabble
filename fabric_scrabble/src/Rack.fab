import fabricated.util.ArrayList;
import fabricated.util.StringComparator;

/**
 * This class represents a player's rack in the Scrabble game.
 */
public class Rack[principal Game, principal Player]{

    public ArrayList[{Game->Player; Game<-}]{Game->Player; Game<-} tiles;

    public Rack{Game->Player; Game<-}(){
      try{
        this.tiles = new ArrayList{Game->Player; Game<-}(new StringComparator());
        }
      catch (IllegalArgumentException exc){

      }
    }

   /**
    * Initializes the rack with 7 random tiles
    */
    public void populateRackTile{Game<-; Game->Player}(Bag[Game]{Game<-; Game->} bag){
      atomic{
        for(int i=0; i < 7; i++){
          String{Game->Player; Game<-} temp = declassify(bag.getTile(), {Game->;Game<-} to {Game->Player;Game<-});

          this.tiles.add(temp);
        }
      }
    }

   /**
   * Replaces the input tile with a random tile drawn from Bag
   */
    private void swapTile{Game<-; Game->Player}(String{Game<-; Game->Player} tile, Bag[Game]{Game<-; Game->} bag){
      atomic{
        if(this.tiles.indexOf(tile) != -1 ){
          String{Game->Player; Game<-} newTile = bag.swapTile(tile, Player);

          this.tiles.remove(this.tiles.indexOf(tile));
          this.tiles.add(newTile);
        }
      }
    }

    /**
    * Replaces all tiles in tileList with random tiles drawn from Bag
    */
    public void swapTiles{Game<-}(String[]{Game<-; Game->Player} tileList, Bag[Game]{Game<-; Game->} bag){
      atomic{
        for (int i=0; i<tileList.length ;i++) {
         this.swapTile(tileList[i], bag);
        }
      }
    }

}
